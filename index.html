<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>For My Kurupeyy ‚ù§Ô∏è</title>
    <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>
    <style>
        :root {
            --pink-light: #ffe5ec;
            --pink-med: #ff85a2;
            --pink-dark: #ff4d6d;
            --text-main: #800f2f;
            --purple-special: #7b2cbf;
        }

        body {
            background-color: var(--pink-light);
            color: var(--text-main);
            font-family: 'Comic Sans MS', cursive, sans-serif;
            margin: 0;
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
            width: 100vw;
            overflow: hidden;
            transition: background 0.8s ease;
        }

        /* Animated Background for Special Screen */
        .special-bg-active {
            background: linear-gradient(45deg, #ff85a2, #7b2cbf, #ff4d6d, #222);
            background-size: 400% 400%;
            animation: gradientBG 8s ease infinite;
        }

        @keyframes gradientBG {
            0% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
            100% { background-position: 0% 50%; }
        }

        .heart-bg {
            position: absolute;
            color: rgba(255, 77, 109, 0.4);
            font-size: 20px;
            pointer-events: none;
            z-index: 1;
            animation: float 5s linear infinite;
        }

        @keyframes float {
            0% { transform: translateY(110vh) rotate(0deg); opacity: 1; }
            100% { transform: translateY(-10vh) rotate(360deg); opacity: 0; }
        }

        .container {
            background: rgba(255, 255, 255, 0.9);
            backdrop-filter: blur(10px);
            padding: 25px;
            border-radius: 30px;
            box-shadow: 0 15px 35px rgba(0,0,0,0.1);
            width: 90%;
            max-width: 400px;
            z-index: 10;
            border: 3px solid white;
            text-align: center;
            position: relative;
        }

        .screen { display: none; flex-direction: column; align-items: center; justify-content: center; min-height: 400px; }
        .active { display: flex; animation: fadeIn 0.5s ease; }

        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }

        .record-player { position: relative; width: 180px; height: 180px; margin: 20px auto; }
        .record {
            width: 100%; height: 100%;
            background: #222;
            border-radius: 50%;
            border: 10px solid #333;
            display: flex;
            justify-content: center;
            align-items: center;
            animation: spin 3s linear infinite;
            animation-play-state: paused;
        }
        .record.playing { animation-play-state: running; }
        .record-label { width: 60px; height: 60px; background: var(--pink-med); border-radius: 50%; border: 4px solid #444; }
        @keyframes spin { from { transform: rotate(0deg); } to { transform: rotate(360deg); } }

        .wiggle { animation: wiggle 2s infinite ease-in-out; display: inline-block; }
        @keyframes wiggle { 0%, 100% { transform: rotate(-5deg); } 50% { transform: rotate(5deg); } }

        .heart-beat { font-size: 50px; animation: beat 0.8s infinite alternate; display: inline-block; color: var(--pink-dark); margin: 10px; }
        @keyframes beat { to { transform: scale(1.3); } }

        .timer { font-size: 1.5rem; font-weight: bold; margin: 15px 0; color: var(--pink-dark); background: white; padding: 10px; border-radius: 15px; border: 2px dashed var(--pink-med); width: 100%; box-sizing: border-box; }
        
        button {
            background: var(--pink-med);
            color: white;
            border: none;
            padding: 12px 28px;
            border-radius: 50px;
            font-size: 1rem;
            font-weight: bold;
            cursor: pointer;
            margin: 10px;
            transition: 0.3s;
        }
        button:hover { background: var(--pink-dark); transform: scale(1.05); }

        .cat-img { width: 200px; height: 200px; object-fit: cover; border-radius: 20px; margin-bottom: 15px; }

        .gift-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 15px; width: 100%; margin-top: 15px; }
        .gift-box { background: white; padding: 25px; border-radius: 20px; cursor: pointer; font-size: 2.5rem; border: 2px solid var(--pink-light); transition: 0.3s; }
        .gift-box:hover { background: var(--pink-light); transform: translateY(-5px); }
        
        #lastSurpriseBtn {
            background: #ff0054;
            display: none; 
            margin-top: 20px;
            animation: beat 0.8s infinite alternate;
        }

        .special-btn {
            background: var(--purple-special);
            font-size: 0.85rem;
            padding: 8px 20px;
            margin-top: 5px;
        }
    </style>
</head>
<body>

    <audio id="mySong" loop>
        <source src="music.mp3" type="audio/mpeg">
    </audio>

    <div class="container">
        <div id="screen0" class="screen active">
            <img src="welcome.jpg" class="cat-img">
            <h2 class="wiggle">Ready to see my surprise?</h2>
            <button onclick="showScreen(1)">YES, START ‚ù§Ô∏è</button>
        </div>

        <div id="screen1" class="screen">
            <h3>open when its</h3>
            <div class="timer" id="timer">00:00:00:00</div>
            <p>new year</p>
            <button onclick="showScreen(2)">NEXT</button>
        </div>

        <div id="screen2" class="screen">
            <img src="question.jpg" class="cat-img">
            <h2 class="wiggle">Hi my love!<br>can I show you something?</h2>
            <div style="display:flex;">
                <button onclick="showScreen(4)">YES</button>
                <button onclick="showScreen(3)" style="background:#b0bec5">NO</button>
            </div>
        </div>

        <div id="screen3" class="screen">
            <img src="angry.jpg" class="cat-img">
            <h2>How dare you say no! üò§</h2>
            <button onclick="showScreen(2)">TRY AGAIN</button>
        </div>

        <div id="screen4" class="screen">
            <div class="heart-beat">‚ù§Ô∏è</div>
            <p style="font-size: 1.1rem; padding: 10px; line-height: 1.5;">
                "njn Enthenkilum okke paranjitondenki sowry enik ni mathre ollu ninne mathram mathi, I'm always yours."
            </p>
            <button onclick="showScreen(5)">CONTINUE ‚ù§Ô∏è</button>
        </div>

        <div id="screen5" class="screen">
            <h2 class="wiggle">Kurupeyy i love you di</h2>
            <p>our randamathe Varsham hehe ‚ú®</p>
            <div class="gift-grid">
                <div class="gift-box" onclick="showGiftPage('hug.jpg', 'A BIG VIRTUAL HUG FOR YOU!', 'hug')">‚úâÔ∏è</div>
                <div class="gift-box" onclick="showGiftPage('flowers.jpg', 'FRESH FLOWERS FOR MY QUEEN!', 'flowers')">üíê</div>
                <div class="gift-box" onclick="showGiftPage('memories.jpg', 'FOR ALL OUR MEMORIES!', 'memories')">üì∏</div>
                <div class="gift-box" onclick="showMusicPage()">üéµ</div>
            </div>
            <button id="lastSurpriseBtn" onclick="openFinalSurprise()">LAST SURPRISE üíù</button>
        </div>

        <div id="screen6" class="screen">
            <img id="gift-image-display" src="" class="cat-img wiggle">
            <div class="heart-beat">‚ù§Ô∏è</div>
            <h2 id="gift-message"></h2>
            <button onclick="goToGifts()">BACK TO GIFTS</button>
        </div>

        <div id="screen7" class="screen">
            <div class="record-player">
                <div id="recordDiv" class="record"><div class="record-label"></div></div>
            </div>
            <h3 class="wiggle">"njn eplum ninteya"</h3>
            <p>I Wanna Be Yours - Arctic Monkeys üéµ</p>
            <button id="playBtn" onclick="toggleMusic()">PLAY SONG üéß</button>
            <button onclick="goToGifts()" style="background:#b0bec5">BACK</button>
        </div>

        <div id="screen8" class="screen">
            <img src="final.jpg" class="cat-img">
            <div class="heart-beat">üíù</div>
            <p style="font-size: 1.1rem; padding: 15px; line-height: 1.6; font-weight: bold;">
                "My Loveee Kurupeyy enik ninne vayankara ishtm ahn ariyaoo hehehhehe kurupey ninne kanan patum enn arinjit ente mind nelath onnu nikniladiii hehe mwahh choclate medich tharameüôàüíù"
            </p>
            <div style="display: flex; flex-direction: column; width: 100%; align-items: center;">
                <button onclick="goToGifts()">BACK ‚ù§Ô∏è</button>
                <button class="special-btn" onclick="openSpecialPage()">SPECIAL ‚ú®</button>
            </div>
        </div>

        <div id="screen9" class="screen">
            <h2 class="wiggle" style="color: white; text-shadow: 2px 2px 8px rgba(0,0,0,0.5);">My Whole Heart...</h2>
            <img src="special.jpg" class="cat-img" style="width: 100%; max-height: 280px; object-fit: contain; border: 5px solid white; box-shadow: 0 0 20px white;">
            <p style="font-style: italic; color: white; font-weight: bold; font-size: 1.2rem;">"I just wanna be yours."</p>
            <button onclick="closeSpecialPage()" style="background:rgba(255,255,255,0.8); color: var(--purple-special);">BACK</button>
        </div>
    </div>

    <script>
        const audio = document.getElementById('mySong');
        const record = document.getElementById('recordDiv');
        const playBtn = document.getElementById('playBtn');
        let heartInterval;
        
        let interactions = { hug: false, flowers: false, memories: false, music: false };

        function showScreen(num) {
            document.querySelectorAll('.screen').forEach(s => s.classList.remove('active'));
            document.getElementById('screen' + num).classList.add('active');
        }

        function createHeart() {
            const heart = document.createElement('div');
            heart.classList.add('heart-bg');
            heart.innerHTML = '‚ù§Ô∏è';
            heart.style.left = Math.random() * 100 + 'vw';
            
            // If we are on the special screen, make hearts more vibrant
            if(document.body.classList.contains('special-bg-active')) {
                heart.style.color = `hsl(${Math.random() * 360}, 100%, 75%)`;
                heart.style.fontSize = (Math.random() * 20 + 20) + 'px';
            }
            
            heart.style.animationDuration = (Math.random() * 2 + 3) + 's';
            document.body.appendChild(heart);
            setTimeout(() => heart.remove(), 5000);
        }

        // Floating Hearts global interval
        heartInterval = setInterval(createHeart, 300);

        function openSpecialPage() {
            document.body.classList.add('special-bg-active');
            // Speed up hearts for the final page
            clearInterval(heartInterval);
            heartInterval = setInterval(createHeart, 150); 
            
            if (audio.paused) {
                audio.play();
                record.classList.add('playing');
                if(playBtn) playBtn.innerText = "PAUSE SONG ‚è∏Ô∏è";
            }
            showScreen(9);
        }

        function closeSpecialPage() {
            document.body.classList.remove('special-bg-active');
            clearInterval(heartInterval);
            heartInterval = setInterval(createHeart, 300); // Back to normal speed
            showScreen(8);
        }

        function goToGifts() {
            checkConditions(); 
            showScreen(5);
        }

        function showGiftPage(imgSrc, message, id) {
            document.getElementById('gift-image-display').src = imgSrc;
            document.getElementById('gift-message').innerText = message;
            if(id) interactions[id] = true;
            showScreen(6);
        }

        function showMusicPage() {
            interactions.music = true;
            showScreen(7);
        }

        function checkConditions() {
            if (interactions.hug && interactions.flowers && interactions.memories && interactions.music) {
                document.getElementById('lastSurpriseBtn').style.display = 'block';
            }
        }

        function openFinalSurprise() {
            showScreen(8);
            var duration = 3 * 1000;
            var end = Date.now() + duration;

            (function frame() {
              confetti({
                particleCount: 5,
                angle: 60, spread: 55, origin: { x: 0 },
                colors: ['#ff85a2', '#ff4d6d', '#ffffff']
              });
              confetti({
                particleCount: 5,
                angle: 120, spread: 55, origin: { x: 1 },
                colors: ['#ff85a2', '#ff4d6d', '#ffffff']
              });
              if (Date.now() < end) { requestAnimationFrame(frame); }
            }());
        }

        function toggleMusic() {
            if (audio.paused) {
                audio.play();
                record.classList.add('playing');
                playBtn.innerText = "PAUSE SONG ‚è∏Ô∏è";
            } else {
                audio.pause();
                record.classList.remove('playing');
                playBtn.innerText = "PLAY SONG üéß";
            }
        }

        // Countdown Timer
        const target = new Date("2026-01-01T00:00:00+05:30").getTime();
        setInterval(() => {
            const now = new Date().getTime();
            const diff = target - now;
            const timerEl = document.getElementById("timer");
            
            if (diff <= 0) {
                if (timerEl) timerEl.innerHTML = "HAPPY NEW YEAR! üéâ";
                return;
            }

            const d = Math.floor(diff / (1000 * 60 * 60 * 24));
            const h = Math.floor((diff % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
            const m = Math.floor((diff % (1000 * 60 * 60)) / (1000 * 60));
            const s = Math.floor((diff % (1000 * 60)) / 1000);
            
            if (timerEl) timerEl.innerHTML = `${d}d : ${h}h : ${m}m : ${s}s`;
        }, 1000);
    </script>
</body>
</html>
